<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>チャットルーム</title>
    <link rel="stylesheet" type="text/css" href="../static/css/chat.css">
</head>
<body>
    <div class="chat-room">
        <div class="header">
            <a href="{{ url_for('home') }}" id="exitBtn" aria-label="チャットルームを退出">退室</a>
        </div>
        <div class="message-area" id="messageArea">
            <!-- メッセージがここに表示されます -->
        </div>
        <form class="input-area">
            <label for="messageInput" class="visually-hidden"></label>
            <input type="text" id="messageInput" placeholder="メッセージを入力" aria-label="メッセージを入力">
            <button type="submit" id="sendBtn">送信</button>
        </form>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const messageInput = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            const messageArea = document.getElementById('messageArea');

            sendBtn.addEventListener('click', function (e) {
                e.preventDefault();
                const messageText = messageInput.value.trim();
                if (messageText) {
                    addMessage(messageText, 'sent');
                    messageInput.value = '';
                    messageArea.scrollTop = messageArea.scrollHeight;
                }
            });

            // 受信メッセージを追加する関数（例: サーバーからのメッセージ）
            function receiveMessage(text) {
                addMessage(text, 'received');
                messageArea.scrollTop = messageArea.scrollHeight;
            }

            function addMessage(text, type) {
                const newMessage = document.createElement('div');
                newMessage.textContent = text;
                newMessage.classList.add('message', type);
                messageArea.appendChild(newMessage);
            }

            // テスト用: 受信メッセージを追加
            setTimeout(() => receiveMessage('これは受信したメッセージです。'), 2000);
        });
        </script>
</body>
</html>
